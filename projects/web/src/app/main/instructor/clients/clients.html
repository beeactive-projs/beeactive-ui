<p-table [value]="clients()" [lazy]="true" [paginator]="true" [rows]="rows" [totalRecords]="totalRecords()"
  [loading]="loading()" [rowsPerPageOptions]="[5, 10, 15]" (onLazyLoad)="loadClients($event)" [scrollable]="true"
  scrollHeight="flex">
  <ng-template #header>
    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Phone</th>
      <th>Status</th>
      <th>Joined</th>
      <th>Sessions</th>
    </tr>
  </ng-template>

  <ng-template #body let-client>
    <tr>
      <td>
        <div class="flex items-center gap-3">
          <p-avatar [label]="initials(client)" shape="circle" styleClass="bg-primary-100 text-primary-700" />
          <span class="font-medium text-secondary-900">{{ client.firstName }} {{ client.lastName }}</span>
        </div>
      </td>
      <td >{{ client.email }}</td>
      <td >{{ client.phone || 'â€”' }}</td>
      <td>
        <p-tag [value]="client.status" [severity]="statusSeverity(client.status)" />
      </td>
      <td >{{ client.joinedAt | date: 'mediumDate' }}</td>
      <td >{{ client.totalSessions }}</td>
    </tr>
  </ng-template>

  <ng-template #loadingbody>
    <tr>
      <td>
        <div class="flex items-center gap-3"><p-skeleton shape="circle" size="2rem" /><p-skeleton width="8rem" />
        </div>
      </td>
      <td><p-skeleton width="12rem" /></td>
      <td><p-skeleton width="7rem" /></td>
      <td><p-skeleton width="4rem" /></td>
      <td><p-skeleton width="6rem" /></td>
      <td><p-skeleton width="3rem" /></td>
    </tr>
  </ng-template>

  <ng-template #emptymessage>
    <tr>
      <td colspan="6">
        <div class="flex flex-col items-center gap-3 py-12 text-center">
          <i class="pi pi-users text-4xl text-secondary-300"></i>
          <h2 class="text-lg font-semibold text-secondary-700">No clients yet</h2>
          <p class="text-sm text-secondary-500">
            Start adding clients to manage their programs and sessions.
          </p>
        </div>
      </td>
    </tr>
  </ng-template>
</p-table>
